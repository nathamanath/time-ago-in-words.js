!function(t,n){"use strict";!function(t,n){var e=t.define||null;"function"==typeof e&&e.amd?e("time_ago",[],function(){return n}):t.TimeAgo=n}(t,function(t,n){var e=[{name:"second",time:3e4,fn:function(t){return n.abs(t)/1e3}},{name:"minute",time:45e3,fn:function(t){return e[0].fn(t)/60}},{name:"hour",time:6e5,fn:function(t){return e[1].fn(t)/60}},{name:"day",fn:function(t){return e[2].fn(t)/24}},{name:"week",fn:function(t){return e[3].fn(t)/7}},{name:"month",fn:function(t){return e[4].fn(t)/4}},{name:"year",fn:function(t){return e[5].fn(t)/12}}],i=function(t){return this.el=t,this.date=this._parseTime(),this.update(),this};return i.prototype={_getDifference:function(){return new Date-this.date},_getTime:function(){return this.el.getAttribute("data-time")},_parseTime:function(){var t,n=this._getTime();return new Date((t=1*n)?t:n)},_calculateMeasure:function(){for(var t,n,i,r=e[0],u=0;n=e[u];){if(i=n.fn(this.difference),1>i)return this.measure=t,void(this.unit=r);r=n,t=i,u++}this.measure=t,this.unit=r},_setTimeout:function(){var t=this.unit.time,n=this;t&&(this._timeout=setTimeout(function(){n.update()},t))},_measureString:function(){var t,e=this.measure;return t=2>e?"hour"===this.unit.name?"an":"a":String(n.floor(e))},_longOutput:function(){var t=null,e=this.measure,i=n.floor(e),r=this.unit.name;i!==e&&(t="about"),e>=2&&(r+="s");var u=[this._measureString(),r,"ago"];return t&&u.unshift(t),u.join(" ")},_shortOutput:function(){return"less than a minute ago"},_isSeconds:function(){return this.unit!==e[0]},_outputString:function(){return this._isSeconds()?this._longOutput():this._shortOutput()},update:function(){this.difference=this._getDifference(),this._calculateMeasure(),this.el.innerHTML=this._outputString(),this._setTimeout()}},i.init=function(t){var n=[];if(!t instanceof Array)throw new Error("TimeAgo.init requires els");for(var e=0;e<t.length;e++){var r=t[e];n.push(i["new"](r))}return n},i["new"]=function(t){if("undefined"==typeof t)throw new Error("TimeAgo.new requires el");return new i(t)},i}(t,n))}(window,Math);
