!function(){"use strict";var e=[{name:"second",time:3e4,fn:function(e){return Math.abs(e)/1e3}},{name:"minute",time:45e3,fn:function(t){return e[0].fn(t)/60}},{name:"hour",time:6e5,fn:function(t){return e[1].fn(t)/60}},{name:"day",fn:function(t){return e[2].fn(t)/24}},{name:"week",fn:function(t){return e[3].fn(t)/7}},{name:"month",fn:function(t){return e[4].fn(t)/30}},{name:"year",fn:function(t){return e[5].fn(t)/12}}],t=function(){return new Date},n=function(e){return this.el=e,this.date=this._parseTime(),this.update(),this};n.prototype={_getDifference:function(){return t()-this.date},_getTime:function(){return this.el.getAttribute("data-time")},_parseTime:function(){var e,t=this._getTime();return new Date((e=1*t)?e:t)},_calculateMeasure:function(){for(var t,n=e[0],i=0;i<e.length;i++){var r,u=e[i];if(r=u.fn(this.difference),1>r)return this.measure=t,void(this.unit=n);n=u,t=r}},_setTimeout:function(){var e=this.unit.time,t=this;e&&(this._timeout=setTimeout(function(){t.update()},e))},update:function(){if(this.difference=this._getDifference(),this._calculateMeasure(),this.unit!==e[0]){var t,n,i="",r=Math.floor(this.measure);r!==this.measure&&(i="about "),t=this.measure<2?"hour"===this.unit.name?"an":"a":r,n=this.unit.name,this.measure>=2&&(n+="s"),this.output=i+t+" "+n+" ago"}else this.output="less than a minute ago";this.el.innerHTML=this.output,this._setTimeout()}},n.init=function(e){var t=[];if(!e instanceof Array)throw new Error("TimeAgo.init requires els");for(var i=0;i<e.length;i++){var r=e[i];t.push(n.new(r))}return t},n.new=function(e){if("undefined"==typeof e)throw new Error("TimeAgo.new requires el");return new n(e)},window.TimeAgo=n}();
